//  ================================================================
//  Created by Fei Shan on 03/15/19.
//  ================================================================

//libraries
#include <Eigen/Eigen>
#include <math.h>

//local
#include "../src/math/typedefs.hpp"
#include "../src/imageio/png_eigen.hpp"

namespace tt = boost::test_tools;
namespace bp = boost::python;
namespace eig = Eigen;

//eig::VectorXf canonical_depth_image = [] {
//    eig::VectorXf canonial_depth_image;
//    canonial_depth_image <<
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    495.f,         489.f,         481.75f,       476.75f,       472.74996948f,
//    469.25003052f, 466.5f,        461.25f,       458.f,         455.75003052f,
//    451.f,         449.99996948f, 449.75003052f, 449.50003052f, 449.50003052f,
//    449.25f,       449.25f,       449.25f,       449.50003052f, 449.50003052f,
//    449.50003052f, 449.99996948f, 451.f,         466.25f,       465.5f,
//    464.5f,        464.25003052f, 463.49996948f, 463.25f,       462.75f,
//    462.50003052f, 462.25f,       462.f,         461.75f,       461.5f,
//    461.5f,        461.5f,        461.25f,       461.25f,       461.25f,
//    461.25f,       461.5f,        461.5f,        461.75f,       462.f,
//    462.25f,       462.50003052f, 462.75f,       463.49996948f, 464.5f,
//    464.25003052f, 463.49996948f, 463.00003052f, 462.50003052f, 462.25f,
//    461.75f,       461.75f,       461.5f,        461.5f,        461.25f,
//    461.25f,       461.25f,       461.25f,       461.5f,        461.5f,
//    461.75f,       462.f,         462.f,         462.25f,       462.50003052f,
//    463.00003052f, 463.25f,       463.75f,       464.25003052f, 464.75f,
//    465.75f,       466.25f,       467.f,         468.25f,       450.5f,
//    449.99996948f, 449.50003052f, 449.50003052f, 449.50003052f, 449.25f,
//    449.25f,       449.50003052f, 449.50003052f, 449.50003052f, 449.99996948f,
//    451.f,         453.75f,       457.50003052f, 460.99996948f, 464.25003052f,
//    467.f,         472.5f,        476.50003052f, 478.75f,       488.75003052f,
//    497.5f,        INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY;
//    return canonical_depth_image;
//} ();
//
//eig::VectorXf live_depth_image = [] {
//    eig::VectorXf live_depth_image;
//    live_depth_image <<
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    473.25f,       458.5f,        456.f,         454.99996948f, 454.75f,
//    454.5f,        454.24996948f, 454.00003052f, 454.00003052f, 454.00003052f,
//    453.75f,       453.75f,       454.5f,        455.25f,       459.24996948f,
//    464.f,         467.50003052f, 470.f,         469.25003052f, 467.74996948f,
//    467.f,         466.5f,        465.99996948f, 465.5f,        465.00003052f,
//    464.75f,       464.25003052f, 464.f,         463.75f,       463.49996948f,
//    463.25f,       463.25f,       463.00003052f, 463.00003052f, 463.00003052f,
//    463.00003052f, 463.00003052f, 463.25f,       463.25f,       463.49996948f,
//    463.75f,       464.25003052f, 464.75f,       464.5f,        463.75f,
//    463.00003052f, 462.25f,       461.75f,       461.5f,        461.25f,
//    460.99996948f, 460.75003052f, 460.5f,        460.25f,       460.25f,
//    460.25f,       460.25f,       460.25f,       460.25f,       460.25f,
//    460.25f,       460.5f,        460.5f,        460.75003052f, 460.99996948f,
//    461.25f,       461.75f,       462.f,         462.50003052f, 463.00003052f,
//    446.75f,       446.25f,       446.f,         445.74996948f, 445.74996948f,
//    445.5f,        445.5f,        445.5f,        445.5f,        445.74996948f,
//    446.f,         448.f,         449.75003052f, 451.75f,       453.5f,
//    455.5f,        457.25f,       459.75f,       461.5f,        462.50003052f,
//    465.25f,       467.25f,       469.5f,        471.5f,        473.f,
//    476.25f,       478.75f,       482.00003052f, 483.5f,        489.25f,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY,
//    INFINITY,          INFINITY,          INFINITY,          INFINITY,          INFINITY;
//    return live_depth_image;
//} ();

eig::Vector3f twist = [] {
    eig::Vector3f twist;
    twist << -0.079572f, 0.006052f, 0.159114f;
    return twist;
} ();



